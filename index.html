<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caccia alla Parola</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }
        
        header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #fdbb2d;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #fdbb2d;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        h2 {
            font-size: 1.8rem;
            margin: 15px 0;
            color: #fdbb2d;
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 10px;
        }
        
        .team {
            text-align: center;
            flex: 1;
            padding: 10px;
        }
        
        .team-a {
            border-right: 1px solid #fdbb2d;
        }
        
        .team-name {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .score {
            font-size: 2rem;
            font-weight: bold;
            color: #fdbb2d;
        }
        
        .game-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .word-grid {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .letter-box {
            width: 60px;
            height: 60px;
            border: 2px solid #fdbb2d;
            margin: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            font-weight: bold;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        .letter-box.revealed {
            background-color: rgba(253, 187, 45, 0.3);
            transform: scale(1.1);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
        
        .buzzer {
            background-color: #e74c3c;
            color: white;
            font-size: 1.3rem;
        }
        
        .buzzer:hover {
            background-color: #c0392b;
            transform: translateY(-3px);
        }
        
        .buzzer:active {
            transform: translateY(1px);
        }
        
        .start-btn {
            background-color: #2ecc71;
            color: white;
        }
        
        .start-btn:hover {
            background-color: #27ae60;
        }
        
        .next-btn {
            background-color: #3498db;
            color: white;
        }
        
        .next-btn:hover {
            background-color: #2980b9;
        }
        
        .correct-btn {
            background-color: #2ecc71;
            color: white;
        }
        
        .wrong-btn {
            background-color: #e74c3c;
            color: white;
        }
        
        .next-game-btn {
            background-color: #9b59b6;
            color: white;
            font-size: 1.2rem;
            padding: 15px 30px;
        }
        
        .next-game-btn:hover {
            background-color: #8e44ad;
        }
        
        .timer {
            font-size: 1.5rem;
            margin: 10px 0;
            text-align: center;
        }
        
        .message {
            text-align: center;
            font-size: 1.3rem;
            margin: 15px 0;
            min-height: 30px;
            padding: 10px;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .setup-screen {
            text-align: center;
        }
        
        .team-setup {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
        }
        
        .team-input {
            flex: 1;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            margin: 0 10px;
        }
        
        .team-input h3 {
            margin-bottom: 15px;
            color: #fdbb2d;
        }
        
        input {
            padding: 10px;
            margin: 8px 0;
            width: 100%;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .hidden {
            display: none;
        }
        
        .game-mode {
            text-align: center;
            margin-bottom: 10px;
            font-size: 1.5rem;
            color: #fdbb2d;
            font-weight: bold;
        }
        
        .answer-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .player-name {
            font-size: 0.9rem;
            color: #fdbb2d;
            margin-top: 5px;
        }
        
        .game-completed {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            background-color: rgba(46, 204, 113, 0.2);
            border-radius: 10px;
            border: 2px solid #2ecc71;
        }
    </style>
</head>
<body>
    <!-- Schermata di setup -->
    <div class="container" id="setupScreen">
        <header>
            <h1>Caccia alla Parola</h1>
        </header>
        
        <div class="setup-screen">
            <h2>Configurazione Squadre</h2>
            
            <div class="team-setup">
                <div class="team-input">
                    <h3>Squadra A</h3>
                    <input type="text" id="teamAName" placeholder="Nome Squadra A" value="Squadra A">
                    <input type="text" id="playerA1" placeholder="Giocatore 1" value="Giocatore A1">
                    <input type="text" id="playerA2" placeholder="Giocatore 2" value="Giocatore A2">
                    <input type="text" id="playerA3" placeholder="Giocatore 3" value="Giocatore A3">
                </div>
                
                <div class="team-input">
                    <h3>Squadra B</h3>
                    <input type="text" id="teamBName" placeholder="Nome Squadra B" value="Squadra B">
                    <input type="text" id="playerB1" placeholder="Giocatore 1" value="Giocatore B1">
                    <input type="text" id="playerB2" placeholder="Giocatore 2" value="Giocatore B2">
                    <input type="text" id="playerB3" placeholder="Giocatore 3" value="Giocatore B3">
                </div>
            </div>
            
            <button class="start-btn" id="startGameBtn">Inizia il Gioco</button>
        </div>
    </div>
    
    <!-- Schermata di gioco principale -->
    <div class="container hidden" id="gameScreen">
        <header>
            <h1>Caccia alla Parola</h1>
            <div class="game-mode" id="gameMode">Modalità: Caccia alla Parola</div>
        </header>
        
        <div class="game-info">
            <div class="team team-a">
                <div class="team-name" id="displayTeamA">Squadra A</div>
                <div class="score" id="scoreA">0</div>
                <div class="players">
                    <div id="displayPlayerA1">Giocatore 1</div>
                    <div id="displayPlayerA2">Giocatore 2</div>
                    <div id="displayPlayerA3">Giocatore 3</div>
                </div>
            </div>
            <div class="team">
                <div class="team-name" id="displayTeamB">Squadra B</div>
                <div class="score" id="scoreB">0</div>
                <div class="players">
                    <div id="displayPlayerB1">Giocatore 1</div>
                    <div id="displayPlayerB2">Giocatore 2</div>
                    <div id="displayPlayerB3">Giocatore 3</div>
                </div>
            </div>
        </div>
        
        <div class="game-area">
            <div class="word-grid" id="wordGrid">
                <!-- Le lettere verranno aggiunte qui dinamicamente -->
            </div>
            
            <div class="timer" id="timer">Parola: 1/12</div>
            
            <div class="message" id="message">Premi "Inizia" per iniziare il gioco!</div>
            
            <div class="controls">
                <button class="start-btn" id="startBtn">Inizia</button>
                <button class="buzzer" id="buzzer">Buzzer</button>
                <button class="next-btn" id="nextBtn">Prossima Parola</button>
            </div>
            
            <div class="answer-controls hidden" id="answerControls">
                <div class="player-name" id="answeringPlayer"></div>
                <button class="correct-btn" id="correctBtn">Risposta Esatta</button>
                <button class="wrong-btn" id="wrongBtn">Risposta Errata</button>
            </div>
            
            <div class="game-completed hidden" id="gameCompleted">
                <h2>Gioco Completato!</h2>
                <p>Hai completato tutte le 12 parole del gioco "Caccia alla Parola"</p>
                <button class="next-game-btn" id="nextGameBtn">Gioco Successivo →</button>
            </div>
        </div>
    </div>

    <script>
        // Variabili di gioco
        let currentWord = '';
        let revealedLetters = [];
        let currentLetterIndex = 0;
        let letterInterval;
        let gameStarted = false;
        let currentRound = 1;
        let totalRounds = 12;
        let scoreA = 0;
        let scoreB = 0;
        let currentTeam = 'A';
        let answeringPlayer = '';
        
        // Lista di parole LUNGHE e complesse (sempre nello stesso ordine)
        const wordList = [
            'AUTOMOBILE', 'TELEVISIONE', 'COMPUTER', 'BIBLIOTECA', 'GIARDINO',
            'ELEFANTE', 'CANGURO', 'DINOSAURO', 'AEROPORTO', 'UNIVERSITÀ',
            'RISTORANTE', 'OSPEDALE'
        ];
        
        // Elementi DOM
        const setupScreen = document.getElementById('setupScreen');
        const gameScreen = document.getElementById('gameScreen');
        const wordGrid = document.getElementById('wordGrid');
        const message = document.getElementById('message');
        const startBtn = document.getElementById('startBtn');
        const buzzer = document.getElementById('buzzer');
        const nextBtn = document.getElementById('nextBtn');
        const scoreAElement = document.getElementById('scoreA');
        const scoreBElement = document.getElementById('scoreB');
        const timerElement = document.getElementById('timer');
        const gameModeElement = document.getElementById('gameMode');
        const startGameBtn = document.getElementById('startGameBtn');
        const answerControls = document.getElementById('answerControls');
        const correctBtn = document.getElementById('correctBtn');
        const wrongBtn = document.getElementById('wrongBtn');
        const answeringPlayerElement = document.getElementById('answeringPlayer');
        const gameCompleted = document.getElementById('gameCompleted');
        const nextGameBtn = document.getElementById('nextGameBtn');
        
        // Elementi per i nomi delle squadre
        const teamANameInput = document.getElementById('teamAName');
        const playerA1Input = document.getElementById('playerA1');
        const playerA2Input = document.getElementById('playerA2');
        const playerA3Input = document.getElementById('playerA3');
        const teamBNameInput = document.getElementById('teamBName');
        const playerB1Input = document.getElementById('playerB1');
        const playerB2Input = document.getElementById('playerB2');
        const playerB3Input = document.getElementById('playerB3');
        
        const displayTeamA = document.getElementById('displayTeamA');
        const displayPlayerA1 = document.getElementById('displayPlayerA1');
        const displayPlayerA2 = document.getElementById('displayPlayerA2');
        const displayPlayerA3 = document.getElementById('displayPlayerA3');
        const displayTeamB = document.getElementById('displayTeamB');
        const displayPlayerB1 = document.getElementById('displayPlayerB1');
        const displayPlayerB2 = document.getElementById('displayPlayerB2');
        const displayPlayerB3 = document.getElementById('displayPlayerB3');
        
        // Inizializzazione del gioco
        function initGame() {
            resetGame();
            updateScores();
            timerElement.textContent = `Parola: ${currentRound}/${totalRounds}`;
        }
        
        // Reset del gioco
        function resetGame() {
            clearInterval(letterInterval);
            gameStarted = false;
            revealedLetters = [];
            currentLetterIndex = 0;
            wordGrid.innerHTML = '';
            message.textContent = 'Premi "Inizia" per iniziare il gioco!';
            buzzer.disabled = true;
            nextBtn.disabled = true;
            answerControls.classList.add('hidden');
        }
        
        // Avvia il gioco
        function startGame() {
            if (gameStarted) return;
            
            gameStarted = true;
            // Prende la parola corrente dalla lista FISSA
            currentWord = wordList[currentRound - 1];
            createWordGrid();
            startRevealingLetters();
            message.textContent = 'Indovina la parola!';
            buzzer.disabled = false;
            startBtn.disabled = true;
            nextBtn.disabled = true;
        }
        
        // Crea la griglia per la parola
        function createWordGrid() {
            wordGrid.innerHTML = '';
            for (let i = 0; i < currentWord.length; i++) {
                const letterBox = document.createElement('div');
                letterBox.className = 'letter-box';
                letterBox.id = `letter-${i}`;
                wordGrid.appendChild(letterBox);
            }
        }
        
        // Inizia a rivelare le lettere
        function startRevealingLetters() {
            const positions = Array.from({length: currentWord.length}, (_, i) => i);
            shuffleArray(positions);
            
            letterInterval = setInterval(() => {
                if (currentLetterIndex >= currentWord.length) {
                    clearInterval(letterInterval);
                    message.textContent = 'Tempo scaduto! Nessuno ha indovinato.';
                    buzzer.disabled = true;
                    nextBtn.disabled = false;
                    return;
                }
                
                const pos = positions[currentLetterIndex];
                revealLetter(pos);
                currentLetterIndex++;
            }, 1500); // 1.5 secondi tra le lettere
        }
        
        // Rivela una lettera
        function revealLetter(position) {
            const letterBox = document.getElementById(`letter-${position}`);
            letterBox.textContent = currentWord[position];
            letterBox.classList.add('revealed');
            revealedLetters.push(currentWord[position]);
            
            // Effetto sonoro (simulato con una classe CSS)
            letterBox.style.animation = 'pulse 0.5s';
            setTimeout(() => {
                letterBox.style.animation = '';
            }, 500);
        }
        
        // Gestisce la pressione del buzzer
        function handleBuzzer() {
            if (!gameStarted) return;
            
            clearInterval(letterInterval);
            
            // Seleziona casualmente un giocatore della squadra corrente
            const players = currentTeam === 'A' 
                ? [playerA1Input.value, playerA2Input.value, playerA3Input.value]
                : [playerB1Input.value, playerB2Input.value, playerB3Input.value];
            
            answeringPlayer = players[Math.floor(Math.random() * players.length)];
            answeringPlayerElement.textContent = `Risponde: ${answeringPlayer}`;
            
            const teamName = currentTeam === 'A' 
                ? (displayTeamA.textContent === 'Squadra A' ? teamANameInput.value : displayTeamA.textContent)
                : (displayTeamB.textContent === 'Squadra B' ? teamBNameInput.value : displayTeamB.textContent);
            
            message.textContent = `${teamName}, qual è la parola?`;
            buzzer.disabled = true;
            answerControls.classList.remove('hidden');
        }
        
        // Gestisce una risposta corretta
        function handleCorrectAnswer() {
            message.textContent = `Esatto! La parola è "${currentWord}"`;
            revealAllLetters();
            updateScore(currentTeam, 10);
            nextBtn.disabled = false;
            answerControls.classList.add('hidden');
        }
        
        // Gestisce una risposta errata
        function handleWrongAnswer() {
            message.textContent = 'Risposta errata! La parola continua...';
            answerControls.classList.add('hidden');
            startRevealingLetters();
            buzzer.disabled = false;
        }
        
        // Rivela tutte le lettere
        function revealAllLetters() {
            for (let i = 0; i < currentWord.length; i++) {
                const letterBox = document.getElementById(`letter-${i}`);
                if (!letterBox.textContent) {
                    letterBox.textContent = currentWord[i];
                    letterBox.classList.add('revealed');
                }
            }
        }
        
        // Passa alla parola successiva
        function nextWord() {
            currentRound++;
            if (currentRound > totalRounds) {
                completeGame();
                return;
            }
            
            timerElement.textContent = `Parola: ${currentRound}/${totalRounds}`;
            resetGame();
            startBtn.disabled = false;
            currentTeam = currentTeam === 'A' ? 'B' : 'A';
        }
        
        // Completa il gioco
        function completeGame() {
            message.textContent = 'Hai completato tutte le parole!';
            startBtn.disabled = true;
            buzzer.disabled = true;
            nextBtn.disabled = true;
            gameCompleted.classList.remove('hidden');
        }
        
        // Aggiorna il punteggio
        function updateScore(team, points) {
            if (team === 'A') {
                scoreA += points;
                scoreAElement.textContent = scoreA;
            } else {
                scoreB += points;
                scoreBElement.textContent = scoreB;
            }
        }
        
        // Funzione per mescolare un array (algoritmo Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        // Inizia il gioco principale dopo il setup
        function startMainGame() {
            // Aggiorna i nomi delle squadre e dei giocatori
            displayTeamA.textContent = teamANameInput.value;
            displayPlayerA1.textContent = playerA1Input.value;
            displayPlayerA2.textContent = playerA2Input.value;
            displayPlayerA3.textContent = playerA3Input.value;
            
            displayTeamB.textContent = teamBNameInput.value;
            displayPlayerB1.textContent = playerB1Input.value;
            displayPlayerB2.textContent = playerB2Input.value;
            displayPlayerB3.textContent = playerB3Input.value;
            
            // Nasconde la schermata di setup e mostra il gioco
            setupScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            
            // Inizializza il gioco
            initGame();
        }
        
        // Aggiungi event listeners
        startBtn.addEventListener('click', startGame);
        buzzer.addEventListener('click', handleBuzzer);
        nextBtn.addEventListener('click', nextWord);
        startGameBtn.addEventListener('click', startMainGame);
        correctBtn.addEventListener('click', handleCorrectAnswer);
        wrongBtn.addEventListener('click', handleWrongAnswer);
        nextGameBtn.addEventListener('click', () => {
            alert('Qui passerà al prossimo gioco: "Quando, dove, come, perché"');
            // Qui andrà il codice per passare al prossimo gioco
        });
        
        // Inizializza il gioco
        initGame();
    </script>
</body>
</html>
